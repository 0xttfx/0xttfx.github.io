<!DOCTYPE html>
<html class="" lang="en"><head>
    
    <meta name="robots" content="noai, noimageai">
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=7" />

    <link
    rel="icon"
    href='/favicon.png'
/>
<link
    rel="shortcut icon"
    href='/favicon.ico'
    type="image/x-icon"
/>
<link
    rel="apple-touch-icon"
    href='/apple-touch-icon.png'
/>

    <link
        rel="icon"
        href='/logo.svg'
        type="image/svg+xml"
    />

<title>
        
            Novu Self Hosting  &ndash;
        
        0xttfx
    </title>

    
    <link href="/symbols-nerd-font/symbols-nerd-font.css" rel="stylesheet" integrity="sha512-lydow8GLOLlYNOtHlksNCmGWWCBsbIEtikXpHzfWqx78HLlyQZHOzyLwPpKol4Th6aCwLUXOfODVYgwrd3nwKQ=="/>
    <link href="/jetbrains-mono/jetbrains-mono.css" rel="stylesheet" integrity="sha512-tJxlgL6v1Y7kFf+qB8SloaAMKnOAw6WouknxXtIjkBux9Y/9aX81EUWOJO8c/3l98DmjG8brr4to7zaez606Fg=="/>

    
        <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
    
    
    <link type="text/css" rel="stylesheet" href=https://0xttfx.tcpip.net.br/css/styles.abbd6311bb4b6ca58f8e7398140529245ae0f6428b759fcd830742eee2619eabb900ba9914a9affb82aa9a16a9b9ea727bb315315a976a0db0e7513a5f12c504.css integrity="sha512-q71jEbtLbKWPjnOYFAUpJFrg9kKLdZ/NgwdC7uJhnqu5ALqZFKmv&#43;4Kqmhapuepye7MVMVqXag2w51E6XxLFBA==" />
<meta name="author" content="Thiago T Faioli" />

    
        <meta name="keywords" content='engineering, Linux, notification infrastructure, open-source' />
    
    
        <meta name="description" content="Novu self-hosted" />
    

<meta property="og:site_name"
    content='0xttfx' />

    <meta property="og:title" content="Novu Self Hosting" />
    <meta property="og:type" content="article" />
    
    <meta
        property="article:author" content="Thiago T Faioli" />
    <meta
        property="article:published_time"
        content='2024-03-23T18:42:59Z-0300' />
    
        
            <meta property="article:tag" content="engineering" />
        
            <meta property="article:tag" content="Linux" />
        
            <meta property="article:tag" content="notification infrastructure" />
        
            <meta property="article:tag" content="open-source" />
        
    
    <meta property="og:url" content="https://0xttfx.tcpip.net.br/posts/novu-self-hosting/" />
    
    
    <meta property="og:image"
        content="https://0xttfx.tcpip.net.br/icon512.png" />
    
        <meta property="og:description" content="Novu self-hosted" />
    

<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:domain"
      content='0xttfx.tcpip.net.br'
/>
<meta property="twitter:url" content="https://0xttfx.tcpip.net.br/posts/novu-self-hosting/" />


    <meta name="twitter:title" content="Novu Self Hosting" />
    
    
    
    <meta name="twitter:image"
        content="https://0xttfx.tcpip.net.br/icon512.png" />
    
        <meta name="twitter:description" content="Novu self-hosted" />
    

<link rel="manifest" href="/manifest/index.json" />
</head>


<body>
        <div id="baseContainer"><header class="">
<div class="titleAndSearchContainer">
        <div id="titleContainer">
            
                <a class="unstyledLink" href="/">
                    <img src='/logo.svg' alt='Logo'/>
                </a>
            
            <div class="rightOfLogo">
                <div class="titleAndHamburger">
                    <h1>
                        <a class="unstyledLink" href="/">0xttfx</a>
                        
                    </h1>
                    
                </div>
                <div id="wide_nav"><nav>
    
    <ul id="main-nav">
        <li><a href="/">Home</a></li>
        
            <li><a href="/posts/">Posts</a></li>
        
        
        
        
        
            <li><a href="https://0xttfx.tcpip.net.br/pages/about/">
                About
            </a></li>
        
        
            <li><a href="https://cv0xttfx.tcpip.net.br">CV</a></li>
        
        
            <li><a href="/tags/">Tags</a></li>
        
        
    </ul>
</nav>
</div>
            </div>
        </div>
        <div class="search">
    <input id="searchbar" type="text" placeholder='Search' />
    <span class="nerdlink" onclick="newSearch();">&#xf002;</span>
</div>
<script>
    function newSearch() {
        let term = searchbar.value.trim();
        if (!term) return;
        location.href = `/search/?q=${term}`;
    }
    searchbar.onkeyup = (ev) => {if (ev.keyCode == 13) newSearch()};
</script>

    </div>
    <div id="links">
        <a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="/index.xml">
    
    
        &#xf09e;
    
    <span>
        RSS
    </span>
</a>

        
        <a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://discord.gg/jMztSAgJ">
    
    
        &#xfb6e;
    
    <span>
        
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="thiago@tcpip.net.br">
    
    
        &#xf6ed;
    
    <span>
        
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://github.com/0xttfx">
    
    
        &#xf09b;
    
    <span>
        
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://instagram.com/0xttfx">
    
    
        &#xf16d;
    
    <span>
        
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://linkedin.com/in/thiagofaioli">
    
    
        &#xf0e1;
    
    <span>
        
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://t.me/0xttfx">
    
    
        &#xf2c6;
    
    <span>
        
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://twitter.com/0xttfx">
    
    
        &#xf099;
    
    <span>
        
    </span>
</a>

    </div>
    

</header>
<div id="contentContainer">
                <div id="content">
                    <main>
<article class="card single">
    
        <h1>Novu Self Hosting</h1>
    
    
        <p class="date">
            <span title='Date'> </span>
    2024-03-23

</p>
    
    
    
    <div class="articleToc">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#novu---the-open-source-notification-infrastructure-for-developers">Novu - The open-source notification infrastructure for developers.</a>
      <ul>
        <li><a href="#how-does-novu-work">How Does Novu Work?</a>
          <ul>
            <li><a href="#architecture">Architecture</a></li>
          </ul>
        </li>
        <li><a href="#lets-go">Let&rsquo;s go</a></li>
      </ul>
    </li>
  </ul>
</nav>
    <hr />
</div>

    <div><h1 id="novu---the-open-source-notification-infrastructure-for-developers">Novu - The open-source notification infrastructure for developers.</h1>
<p>The objective here is to show the configuration of the .env file and the NGINX reverse proxy, which was my biggest difficulty due to the lack of essential details in the project documentation for this purpose.</p>
<h2 id="how-does-novu-work">How Does Novu Work?</h2>
<p>Novu is based on  two components</p>
<ul>
<li>An API for data exchange</li>
<li>A panel to design notifications and their logical rules</li>
</ul>
<h3 id="architecture">Architecture</h3>
<p>Novu&rsquo;s Object Communication Layer - OCL is a framework that separates communication tasks into specialized components, similar to microservices, that handle specific functions, such as messaging and data management.</p>
<p><img src="/images/Novu/Novu_Architecture_v2.png" alt="architecture"></p>
<h2 id="lets-go">Let&rsquo;s go</h2>
<ul>
<li>Clone Novu repo</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Go to source folder </span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">cd</span> /usr/local/src
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Get the code</span>
</span></span><span style="display:flex;"><span>git clone --depth <span style="color:#bd93f9">1</span> https://github.com/novuhq/novu
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Go to the docker folder</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">cd</span> novu/docker
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Copy the example env file</span>
</span></span><span style="display:flex;"><span>cp .env.example ./local/deployment/.env
</span></span></code></pre></div><ul>
<li>.env</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#6272a4"># Secrets</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># YOU MUST CHANGE THESE BEFORE GOING INTO PRODUCTION</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># used as a secret to verify the JWT token signature</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">JWT_SECRET</span><span style="color:#ff79c6">=</span>&lt;secret&gt;
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># used to encrypt/decrypt the provider credentials</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">STORE_ENCRYPTION_KEY</span><span style="color:#ff79c6">=</span>&lt;key&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Host</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">HOST_NAME</span><span style="color:#ff79c6">=</span>https://novu.yourdns.com.br
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># General</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># available values &#39;dev&#39;, &#39;test&#39;, &#39;production&#39;, &#39;ci&#39;, &#39;local&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">NODE_ENV</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">local</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">MONGO_MAX_POOL_SIZE</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">500</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">MONGO_MIN_POOL_SIZE</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># MONGO USER</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">MONGO_INITDB_ROOT_USERNAME</span><span style="color:#ff79c6">=</span>root
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># MONGO PASSWORD</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">MONGO_INITDB_ROOT_PASSWORD</span><span style="color:#ff79c6">=</span>&lt;password&gt;
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">MONGO_URL</span><span style="color:#ff79c6">=</span>mongodb://root:&lt;password&gt;@mongodb:27017/novu-db?authSource<span style="color:#ff79c6">=</span>admin
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">REDIS_HOST</span><span style="color:#ff79c6">=</span>redis
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">REDIS_PASSWORD</span><span style="color:#ff79c6">=</span>&lt;password&gt;
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">REDIS_CACHE_SERVICE_HOST</span><span style="color:#ff79c6">=</span>redis
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># AWS</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">S3_LOCAL_STACK</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">$HOST_NAME</span>:4566
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">S3_BUCKET_NAME</span><span style="color:#ff79c6">=</span>novu-local
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">S3_REGION</span><span style="color:#ff79c6">=</span>us-east-1
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">AWS_ACCESS_KEY_ID</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">test</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">AWS_SECRET_ACCESS_KEY</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">test</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Ports</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">API_PORT</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">3000</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">REDIS_PORT</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">6379</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">REDIS_CACHE_SERVICE_PORT</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">6379</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">WS_PORT</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">3002</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Root URL</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">REACT_APP_WS_URL</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">$HOST_NAME</span>/ws
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Uncomment this one when deploying Novu in the local environment</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># as Web app local Dockerfile will have to load this to be used.</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Deployment version doesn&#39;t need as we inject it with API_ROOT_URL value.</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#REACT_APP_API_URL=$HOST_NAME:3000</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">API_ROOT_URL</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">$HOST_NAME</span>/api
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">DISABLE_USER_REGISTRATION</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">false</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">FRONT_BASE_URL</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">$HOST_NAME</span>:4200
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">WIDGET_EMBED_PATH</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">$HOST_NAME</span>:4701/embed.umd.min.js
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">WIDGET_URL</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">$HOST_NAME</span>/widget
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Context Paths for reverse-proxies</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">GLOBAL_CONTEXT_PATH</span><span style="color:#ff79c6">=</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">WEB_CONTEXT_PATH</span><span style="color:#ff79c6">=</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">API_CONTEXT_PATH</span><span style="color:#ff79c6">=</span>api
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">WS_CONTEXT_PATH</span><span style="color:#ff79c6">=</span>ws
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">WIDGET_CONTEXT_PATH</span><span style="color:#ff79c6">=</span>widget
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Analytics</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">SENTRY_DSN</span><span style="color:#ff79c6">=</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># change these values</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">NEW_RELIC_APP_NAME</span><span style="color:#ff79c6">=</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">NEW_RELIC_LICENSE_KEY</span><span style="color:#ff79c6">=</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">DISABLE_USER_REGISTRATION</span><span style="color:#ff79c6">=</span>
</span></span></code></pre></div><ul>
<li>NGINX configuration</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#ff79c6">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">listen</span> <span style="color:#bd93f9">80</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">client_max_body_size</span> <span style="color:#f1fa8c">20M</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">server_name</span> <span style="color:#f1fa8c">yourdns.com.br</span> <span style="color:#f1fa8c">xxx.xxx.xxx.xxx</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">access_log</span>  <span style="color:#f1fa8c">/var/log/nginx/novu_access.log</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">error_log</span> <span style="color:#f1fa8c">/var/log/nginx/novu_error.log</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">location</span> <span style="color:#f1fa8c">/</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#ff79c6">proxy_pass</span> <span style="color:#f1fa8c">http://localhost:4200</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#ff79c6">proxy_http_version</span> <span style="color:#bd93f9">1</span><span style="color:#f1fa8c">.1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">if</span> <span style="color:#f1fa8c">(</span><span style="color:#8be9fd;font-style:italic">$request_method</span> = <span style="color:#f1fa8c">OPTIONS)</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#ff79c6">add_header</span> <span style="color:#f1fa8c">&#39;Access-Control-Allow-Origin&#39;</span> <span style="color:#f1fa8c">&#39;*&#39;</span>;
</span></span><span style="display:flex;"><span>              <span style="color:#ff79c6">add_header</span> <span style="color:#f1fa8c">&#39;Access-Control-Allow-Methods&#39;</span> <span style="color:#f1fa8c">&#39;GET,</span> <span style="color:#f1fa8c">POST,</span> <span style="color:#f1fa8c">PUT,</span> <span style="color:#f1fa8c">DELETE&#39;</span>;
</span></span><span style="display:flex;"><span>              <span style="color:#ff79c6">add_header</span> <span style="color:#f1fa8c">&#39;Access-Control-Allow-Headers&#39;</span> <span style="color:#f1fa8c">&#39;Content-Type,</span> <span style="color:#f1fa8c">Authorization&#39;</span>;
</span></span><span style="display:flex;"><span>              <span style="color:#ff79c6">return</span> <span style="color:#bd93f9">200</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">X-Forwarded-For</span> <span style="color:#8be9fd;font-style:italic">$proxy_add_x_forwarded_for</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Host</span> <span style="color:#8be9fd;font-style:italic">$host</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Upgrade</span> <span style="color:#8be9fd;font-style:italic">$http_upgrade</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Connection</span> <span style="color:#f1fa8c">&#34;upgrade&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">location</span> <span style="color:#f1fa8c">/api</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_pass</span> <span style="color:#f1fa8c">http://localhost:3000/api</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#ff79c6">proxy_http_version</span> <span style="color:#bd93f9">1</span><span style="color:#f1fa8c">.1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">add_header</span> <span style="color:#f1fa8c">&#39;Access-Control-Allow-Origin&#39;</span> <span style="color:#f1fa8c">&#39;*&#39;</span>; 
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">add_header</span> <span style="color:#f1fa8c">&#39;Access-Control-Allow-Methods&#39;</span> <span style="color:#f1fa8c">&#39;GET,</span> <span style="color:#f1fa8c">POST,</span> <span style="color:#f1fa8c">PUT,</span> <span style="color:#f1fa8c">DELETE&#39;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">add_header</span> <span style="color:#f1fa8c">&#39;Access-Control-Allow-Headers&#39;</span> <span style="color:#f1fa8c">&#39;Content-Type,</span> <span style="color:#f1fa8c">Authorization&#39;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">X-Forwarded-For</span> <span style="color:#8be9fd;font-style:italic">$proxy_add_x_forwarded_for</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Host</span> <span style="color:#8be9fd;font-style:italic">$host</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Upgrade</span> <span style="color:#8be9fd;font-style:italic">$http_upgrade</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Connection</span> <span style="color:#f1fa8c">&#34;upgrade&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">location</span> <span style="color:#f1fa8c">/ws</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_pass</span> <span style="color:#f1fa8c">http://localhost:3002/ws</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#ff79c6">proxy_http_version</span> <span style="color:#bd93f9">1</span><span style="color:#f1fa8c">.1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">X-Forwarded-For</span> <span style="color:#8be9fd;font-style:italic">$proxy_add_x_forwarded_for</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Host</span> <span style="color:#8be9fd;font-style:italic">$host</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Upgrade</span> <span style="color:#8be9fd;font-style:italic">$http_upgrade</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Connection</span> <span style="color:#f1fa8c">&#34;upgrade&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">location</span> <span style="color:#f1fa8c">/widget</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#ff79c6">proxy_pass</span> <span style="color:#f1fa8c">http://localhost:4500/widget</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_http_version</span> <span style="color:#bd93f9">1</span><span style="color:#f1fa8c">.1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">X-Forwarded-For</span> <span style="color:#8be9fd;font-style:italic">$proxy_add_x_forwarded_for</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Host</span> <span style="color:#8be9fd;font-style:italic">$host</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Upgrade</span> <span style="color:#8be9fd;font-style:italic">$http_upgrade</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Connection</span> <span style="color:#f1fa8c">&#34;upgrade&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">location</span> <span style="color:#f1fa8c">/socket.io/</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#ff79c6">proxy_pass</span> <span style="color:#f1fa8c">http://localhost:3002</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_http_version</span> <span style="color:#bd93f9">1</span><span style="color:#f1fa8c">.1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">X-Forwarded-For</span> <span style="color:#8be9fd;font-style:italic">$proxy_add_x_forwarded_for</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Host</span> <span style="color:#8be9fd;font-style:italic">$host</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Upgrade</span> <span style="color:#8be9fd;font-style:italic">$http_upgrade</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">proxy_set_header</span> <span style="color:#f1fa8c">Connection</span> <span style="color:#f1fa8c">&#34;upgrade&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># proxy_headers_hash_max_size 512;
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"># proxy_headers_hash_bucket_size 128;
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><p>Now just be happy :)</p>
</div>
</article>

    <hr />
    <p class="articleTagsContainer">
        <span> </span>
        <strong>Tags:</strong>
        
            <a
                
                href="/tags/engineering/">#engineering</a>
        
            <a
                
                href="/tags/linux/">#Linux</a>
        
            <a
                
                href="/tags/notification-infrastructure/">#notification infrastructure</a>
        
            <a
                
                href="/tags/open-source/">#open-source</a>
        
    </p>




<script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>

<div id="ficurinia-cactus-comments"></div>

<script>
initComments({
    node: document.getElementById("ficurinia-cactus-comments"),
    defaultHomeserverUrl: 'https:\/\/matrix.cactus.chat:8448',
    serverName: 'cactus.chat',
    siteName: "0xttfx.tcpip.net.br",
    commentSectionId: "05efd81bad5e56666d3c37b4ff5cf5dc"
})
</script>



                    </main><footer>
    <hr />

<p><small>
        2024 &copy; Running on <a href="https://openbsd.org">OpenBSD</a> and <a href="https://man.openbsd.org/httpd.8">httpd</a> |  <a href="https://0xttfx.tcpip.net.br">0xttfx</a> - <a href="https://spdx.org/licenses/BSD-3-Clause">BSD-3-Clause</a>
    </small></p>
    <p><small>
        <a href='https://gitlab.com/gabmus/hugo-ficurinia'>Ficurinia theme</a> for <a href='https://gohugo.io'>Hugo</a> by <a href='https://gabmus.org'>Gabriele Musco</a>. Licensed under <a href='https://www.gnu.org/licenses/agpl-3.0.html'>GNU AGPLv3</a>.
    </small></p>
</footer>
</div>
            </div>
        </div>
    
        <script
            async
            defer
            data-domain="example.com"
            src="https://something.com/..."
        ></script>
    


    
        <script
            async
            defer
            data-website-id="example-tracking-code"
            src="https://something.com/..."
        ></script>
    


</body>
</html>
